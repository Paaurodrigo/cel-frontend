<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card border-0 shadow-lg">
        <!-- Cabecera -->
        <div class="card-header bg-primary text-white py-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-person-circle display-6 me-3"></i>
            <div>
              <h2 class="fw-bold mb-0">Edicion de Perfil</h2>
              <p class="mb-0 opacity-75">Modifique la información que usted quier</p>
            </div>
          </div>
        </div>

        <div class="card-body p-4">
          <form [formGroup]="oSocioForm" (ngSubmit)="onSubmit()">
            <!-- Información Personal -->
            <div class="card mb-4 border-0 shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-person me-2"></i>
                  Información Personal
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Nombre</mat-label>
                      <input matInput formControlName="nombre" required />
                      <mat-error *ngIf="oSocioForm.get('nombre')?.hasError('required')">
                        El nombre es obligatorio
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>DNI</mat-label>
                      <input matInput formControlName="dni" required readonly="" />
                      <mat-error *ngIf="oSocioForm.get('dni')?.hasError('required')">
                        El DNI es obligatorio
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Primer Apellido</mat-label>
                      <input matInput formControlName="apellido1" required />
                      <mat-error *ngIf="oSocioForm.get('apellido1')?.hasError('required')">
                        El primer apellido es obligatorio
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Segundo Apellido</mat-label>
                      <input matInput formControlName="apellido2" />
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>

            <!-- Información de Contacto -->
            <div class="card mb-4 border-0 shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-envelope me-2"></i>
                  Información de Contacto
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Email</mat-label>
                      <input matInput formControlName="email" required type="email" />
                      <mat-error *ngIf="oSocioForm.get('email')?.hasError('required')">
                        El email es obligatorio
                      </mat-error>
                      <mat-error *ngIf="oSocioForm.get('email')?.hasError('email')">
                        Formato de email inválido
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-6 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Teléfono</mat-label>
                      <input matInput formControlName="telefono" required type="tel" />
                      <mat-error *ngIf="oSocioForm.get('telefono')?.hasError('required')">
                        El teléfono es obligatorio
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>

            <!-- Dirección Fiscal -->
            <div class="card mb-4 border-0 shadow-sm">
              <div class="card-header bg-light">
                <h5 class="mb-0">
                  <i class="bi bi-geo-alt me-2"></i>
                  Dirección Fiscal
                </h5>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-md-8 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Dirección</mat-label>
                      <input matInput formControlName="direccionfiscal" required />
                      <mat-error *ngIf="oSocioForm.get('direccionfiscal')?.hasError('required')">
                        La dirección es obligatoria
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-4 mb-3">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Código Postal</mat-label>
                      <input matInput formControlName="codigopostal" required />
                      <mat-error *ngIf="oSocioForm.get('codigopostal')?.hasError('required')">
                        El código postal es obligatorio
                      </mat-error>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>

            <!-- Botones de acción -->
            <div class="d-flex justify-content-end gap-3 mt-4">
              <a class="btn btn-outline-secondary" [routerLink]="['/admin', 'socio', 'plist']">
                <i class="bi bi-arrow-left me-2"></i>Volver al listado
              </a>
              <button type="submit" class="btn btn-primary" [disabled]="!oSocioForm.valid">
                <i class="bi bi-save me-2"></i>Guardar cambios
              </button>
            </div>

            <!-- Mensajes de error/éxito -->
            <div *ngIf="strMessage" class="mt-3 text-center" [ngClass]="{ 'text-success': showSuccess, 'text-danger': !showSuccess }">
              {{ strMessage }}
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Resultado -->
<div class="modal fade" id="mimodal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow rounded-4">
      <div class="modal-header border-0" [ngClass]="{'bg-success text-white': strMessage.includes('correctamente'),
                                                    'bg-danger text-white': strMessage.includes('Error')}">
        <h5 class="modal-title" id="modalLabel">
          <i [class]="strMessage.includes('correctamente') ? 'bi bi-check-circle me-2' : 'bi bi-exclamation-circle me-2'"></i>
          {{ strMessage.includes('correctamente') ? 'Éxito' : 'Error' }}
        </h5>
        <button type="button" class="btn-close" [class.btn-close-white]="true" data-bs-dismiss="modal" aria-label="Close" (click)="hideModal()"></button>
      </div>
      <div class="modal-body text-center p-4">
        <p class="mb-0">{{ strMessage }}</p>
      </div>
      <div class="modal-footer border-0 justify-content-center">
        <button type="button" class="btn btn-primary px-4" data-bs-dismiss="modal" (click)="hideModal()">
          Aceptar
        </button>
      </div>
    </div>
  </div>
</div>
